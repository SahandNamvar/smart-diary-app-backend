# Smart Diary App - Backend

## 1. Backend Project Setup (Dependencies)
- Node.js (Express) - Backend server
- MongoDB - Database (via Mongoose)
- JWT - Authentication
- Axios - External API request (Google NLP, OpenAI GPT-3) 
- dotenv - Environment variables
- bcrypt - Password hashing
- cors - Cross-origin resource sharing
- rate-limiter - Rate limiting for API requests (100 requests per 15 minutes)
- express-validator - Request validation

## 2. MongoDB Collection Schema
- User collection: username, email, password (hashed with bcrypt), createdAt (validation at database level + express-validator)
- DiaryEntry collection: user_id, text_entry, auto_response, sentiment_score, sentiment_magnitude, createdAt, updatedAt

## 3. JWT Authentication and Authorization
- Register/Login routes: Hash password with bcrypt. Use JWT tokens to protect routes.
- Middleware: Check token validity and user access rights.

## 4. CRUD Operations for Diary Entries
- Create: Post new diary entry
- Read: Get all diary entries for a user
- Update: Modify existing diary entry
- Delete: Remove diary entry

## 5. Google NLP API Integration
- Sentiment Analysis: Pass the diary entry to Google Cloud Natural Language API.
- Response Data: Extract sentiment score and magnitude from the API response.

## 6. OpenAI GPT-3 API Integration *(gpt-3.5-turbo engine)*
- Personalized auto-response: Based on the sentiment analysis result, generate a thoughtful and empathetic response using the OpenAI GPT-3 API.
- The response is generated by providing a prompt that includes the text entry and sentiment information.

## 7. Environment Variables
- Store sensitive information like API keys, database connection string in a .env file.

## 8. Data Visualization (Future Work)
- Trend Analysis: Aggregate and return sentiment scores over time (for future use on the frontend visualization like graphs and word clouds).

## Backend API Endpoints
1. Authentication Routes (/api/auth)
   - POST /register: Create a new user, store hashed password.
   - POST /login: Validate user credentials, return JWT token.

2. Diary Entry Routes (/api/entries)
   - GET /: Fetch all user diary entries (protected route).
   - POST /: Create a new diary entry (protected route, triggers sentiment analysis & GPT-3 response).
   - PUT /:id: Update an existing entry by ID (protected route).
   - DELETE /:id: Delete an entry by ID (protected route).

3. Sentiment Analysis (via axios)
   - `axios.post('https://language.googleapis.com/v1/documents:analyze')` - Google Cloud Natural Language API.

4. Auto-Response Generation (via OpenAI API - downloaded as a package)
   - `openai.chatCompletion.create()` - OpenAI GPT-3 API.
